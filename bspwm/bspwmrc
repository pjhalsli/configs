#! /bin/sh
#
# **                                                           
#/**              ******                                       
#/**       ******/**///** ***     ** **********  ******  ***** 
#/******  **//// /**  /**//**  * /**//**//**//**//**//* **///**
#/**///**//***** /******  /** ***/** /** /** /** /** / /**  // 
#/**  /** /////**/**///   /****/**** /** /** /** /**   /**   **
#/******  ****** /**      ***/ ///** *** /** /**/***   //***** 
#/////   //////  //      ///    /// ///  //  // ///     ///// 
#


# Autostart Some Shit
sxhkd &
compton &
dunst &
feh --bg-scale Bilder/wp/wallhaven-757805.jpg
$HOME/.config/polybar/launch.sh


bspc monitor -d I II III IV V VI VII VIII IX X
#bspc monitor -d www trm fls mpd pht cds rdt trnt cht 10

bspc config border_width 6 
bspc config window_gap   0 

bspc config window_gap $gap;
bspc config top_padding $(($PANEL_HEIGHT-gap))
bspc config left_padding -$gap
bspc config right_padding -$gap
bspc config bottom_padding -$gap


## pywal -if you feel lazy
## source the colors.
#. "${HOME}/.cache/wal/colors.sh"

## Set the border colors.
#bspc config normal_border_color "$color1"
#bspc config active_border_color "$color2"
#bspc config focused_border_color "$color15"
#bspc config presel_feedback_color "$color1"

# Set the border colors - without pywal
bspc config normal_border_color "#102029"
bspc config active_border_color "#7CABA3"
bspc config focused_border_color "#D9DBE3"
bspc config presel_feedback_color "#102030"

bspc config single_monocle       true
bspc config borderless_monocle   false
bspc config gapless_monocle      true
bspc config focus_follows_pointer true
bspc config pointer_follows_focus false
bspc config center_pseudo_tiled true

bspc config split_ratio          0.50

# Automatic Splitting Settings
bspc config automatic_scheme	spiral
bspc config initial_polarity	second_child

# Leave Room For Ppanel
bspc config top_padding 32
#bspc config bottom_padding 10 
#bspc config left_padding 10
#bspc config right_padding 10

# Open On Specific Workspace
bspc rule --add Firefox desktop=I follow=off 
bspc rule --add qutebrowser desktop=I follow=off
bspc rule --add Opera desktop=I follow=off
bspc rule --add brave desktop=I follow=off

bspc rule --add Thunar desktop=III follow=off 
bspc rule --add Transmission-gtk desktop=VIII focus=on  
bspc rule --add feh state=floating focus=on
bspc rule --add mpv state=floating


function reset_color_if_not_VIM {
	#autocmd events in ~/.vimrc will handle case where window is VIM
	node_id=$(echo $1 | grep -oE '[^ ]+$')
	node_name=$(xtitle $node_id)
	if [[ $node_name != *"VIM"* ]]; then
		$HOME/.vim/bspwm_border_color/reset
	fi
}

bspc subscribe node_focus | while read -r line; do reset_color_if_not_VIM "$line"; done

# vim: ft=sh

